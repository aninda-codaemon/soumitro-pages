! function(a, b, c) {
    "use strict";

    function m() {
        function w(b) {
            var c = b.data.addr,
                d = b.data.streetField,
                e = a.trim(b.data.streetField.val()),
                f = b.data.containerUi,
                g = a(".smarty-autocomplete", f);
            return e || (c.lastStreetInput = e, g.empty(), f.hide()), 13 == b.keyCode ? (a(".smarty-active-suggestion:visible").length > 0 && y(c, j.suggestions[a(".smarty-active-suggestion:visible").first().data("suggIndex")], f), f.hide(), d.blur(), C(b)) : 40 == b.keyCode ? (G(d[0]), void 0) : 38 == b.keyCode ? (G(d[0]), void 0) : (e && e != c.lastStreetInput && c.isDomestic() && (c.lastStreetInput = e, A("AutocompleteInvoked", {
                containerUi: f,
                suggContainer: g,
                streetField: d,
                input: e,
                addr: c
            })), void 0)
        }

        function y(b, c, d) {
            var e = b.getDomFields();
            if (d.hide(), b.isFreeform()) a(e.street).val(c.text).change();
            else {
                if (e.zipcode && a(e.zipcode).val("").change(), e.street && a(e.street).val(c.street_line).change(), e.state)
                    if (e.state.options) {
                        for (var f = 0; f < e.state.options.length; f++)
                            if (e.state.options[f].text.toUpperCase() === c.state || n[e.state.options[f].text.toUpperCase()] === c.state) {
                                a(e.state)[0].selectedIndex = f, a(e.state).change();
                                break
                            }
                    } else a(e.state).val(c.state).change();
                e.city && a(e.city).val(c.city).change(), e.lastline && a(e.lastline).val(c.city + " " + c.state).change()
            }
        }

        function B(a) {
            return {
                top: a.top + a.height / 2 - 10,
                left: a.right - 6
            }
        }

        function D(b, c, d) {
            for (var e = z(b.name), f = z(b.id), g = f.replace(/[\[|\]|\(|\)|\:|\'|\"|\=|\||\#|\.|\!|\||\@|\^|\&|\*]/g, "\\\\$&"), h = z(b.placeholder), i = z(b.title), j = 0; j < c.length; j++)
                if (e.indexOf(c[j]) > -1 || f.indexOf(c[j]) > -1) return !0;
            if (!("labels" in b)) {
                var k = a('label[for="' + g + '"]')[0] || a(b).parents("label")[0];
                b.labels = k ? [k] : []
            }
            for (var j = 0; j < b.labels.length; j++)
                for (var l = 0; l < d.length; l++)
                    if (a(b.labels[j]).text().toLowerCase().indexOf(d[l]) > -1) return !0;
            for (var j = 0; j < d.length; j++)
                if (h.indexOf(d[j]) > -1 || i.indexOf(d[j]) > -1) return !0;
            return !1
        }

        function E(b, d) {
            a(c).unbind("keyup"), a(b).slideUp(g.speed, function() {
                a(this).parent(".smarty-ui").remove()
            }), A("Completed", d.data)
        }

        function F(b) {
            for (var c in b) a("body").undelegate(b[c], "click")
        }

        function G(a) {
            if ("number" == typeof a.selectionStart) a.selectionStart = a.selectionEnd = a.value.length;
            else if ("undefined" != typeof a.createTextRange) {
                a.focus();
                var b = a.createTextRange();
                b.collapse(!1), b.select()
            }
        }

        function H(a) {
            if (h.autocomplete > 0)
                for (var b = 0; b < a.getElementsByTagName("input").length; b++) a.getElementsByTagName("input")[b].autocomplete = "smartystreets"
        }

        function I(b) {
            if (b.getElementsByTagName("option").length > 0 && (x(o, b.getElementsByTagName("option")[0].text.toUpperCase()) || x(p, b.getElementsByTagName("option")[0].text.toUpperCase()))) {
                var d = c.createElement("OPTION");
                d.innerText = "State", d.selected = !0, a(b.getElementsByTagName("select")[0]).prepend(d), a(b).change()
            }
        }
        var e, j, f = {
                formDataProperty: "smarty-form",
                identifiers: {
                    streets: {
                        names: ["street", "address", "address1", "address2", "addr1", "addr2", "address-1", "address-2", "address_1", "address_2", "line", "primary"],
                        labels: ["street", "address", "line ", " line"]
                    },
                    secondary: {
                        names: ["suite", "apartment", "primary", "pmb", "secondary"],
                        labels: ["suite", "apartment", "apt:", "apt.", "ste:", "ste.", "unit:", "unit.", "unit ", "box", "pmb"]
                    },
                    city: {
                        names: ["city", "town", "village", "cityname", "city-name", "city_name", "cities"],
                        labels: ["city", "town", "city name"]
                    },
                    state: {
                        names: ["state", "province", "region", "section", "territory"],
                        labels: ["state", "province", "region", "section", "territory"]
                    },
                    zipcode: {
                        names: ["zip", "zipcode", "zip-code", "zip_code", "postal_code", "postal-code", "postalcode", "postcode", "post-code", "post_code", "postal", "zcode"],
                        labels: ["zip", "zip code", "postal code", "postcode", "locality"]
                    },
                    lastline: {
                        names: ["lastline", "last-line", "citystatezip", "city-state-zip", "city_state_zip"],
                        labels: ["last line", "city/state/zip", "city / state / zip", "city - state - zip", "city-state-zip", "city, state, zip"]
                    },
                    country: {
                        names: ["country", "nation", "sovereignty"],
                        labels: ["country", "nation", "sovereignty"]
                    }
                },
                street1exacts: {
                    names: ["address", "street", "address1", "streetaddress", "street-address", "street_address", "streetaddr", "street-addr", "street_addr", "str", "str1", "street1", "addr"]
                },
                street2: {
                    names: ["address2", "address_2", "address-2", "street2", "addr2", "addr_2", "line2", "str2", "second", "two"],
                    labels: [" 2", "second ", "two"]
                },
                exclude: {
                    names: ["email", "e-mail", "e_mail", "firstname", "first-name", "first_name", "lastname", "last-name", "last_name", "fname", "lname", "name", "eml", "type", "township", "zip4", "plus4", "method", "location", "store", "save", "keep", "phn", "phone", "cardholder", "security", "comp", "firm", "org", "addressee", "addresses", "group", "gate", "fax", "cvc", "cvv", "file", "search", "list"],
                    labels: ["email", "e-mail", "e mail", " type", "save ", "keep", "name", "method", "phone", "organization", "company", "addressee", "township", "firm", "group", "gate", "cardholder", "cvc", "cvv", "search", "file", " list", "fax", "book"]
                }
            },
            m = 0,
            q = [],
            t = 24,
            u = 8,
            v = "<style>.smarty-dots { display: none; position: absolute; z-index: 999; width: " + t + "px; height: " + u + "px; background-image: url('data:image/gif;base64,R0lGODlhGAAIAOMAALSytOTi5MTCxPTy9Ly6vPz6/Ozq7MzKzLS2tOTm5PT29Ly+vPz+/MzOzP///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJBgAOACwAAAAAGAAIAAAEUtA5NZi8jNrr2FBScQAAYVyKQC6gZBDkUTRkXUhLDSwhojc+XcAx0JEGjoRxCRgWjcjAkqZr5WoIiSJIaohIiATqimglg4KWwrDBDNiczgDpiAAAIfkECQYAFwAsAAAAABgACACEVFZUtLK05OLkxMbE9PL0jI6MvL68bG5s7Ors1NbU/Pr8ZGJkvLq8zM7MXFpctLa05ObkzMrM9Pb0nJqcxMLE7O7s/P78////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABWDgZVWQcp2nJREWmhLSKRWOcySoRAWBEZ8IBi+imAAcxwXhZODxDCfFwxloLI6A7OBCoPKWEG/giqxRuOLKRSA2lpVM6kM2dTZmyBuK0Aw8fhcQdQMxIwImLiMSLYkVPyEAIfkECQYAFwAsAAAAABgACACEBAIEpKak1NbU7O7svL68VFZU/Pr8JCIktLK05OLkzMrMDA4M9Pb0vLq87Ors9PL0xMLEZGZk/P78tLa05ObkzM7MFBIU////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABWLgJVGCcZ2n9DASmq7nUwDAQaAPhCAEgzqNncIQodEWgxNht7tdDBMmorIw0gKXh3T3uCSYgV3VitUiwrskZTspGpFKsJMRRVdkNBuKseT5Tg4TUQo+BgkCfygSDCwuIgN/IQAh+QQJBgAXACwAAAAAGAAIAIRUVlS0srTk4uR8enz08vTExsRsbmzs6uyMjoz8+vzU1tRkYmS8urzMzsxcWly0trTk5uR8fnz09vTMyszs7uycmpz8/vz///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFYOBlUVBynad1QBaaEtIpIY5jKOgxAM5w5IxAYJKo8HgLwmnnAAAGsodQ2FgcnYUL5Nh0QLTTqbXryB6cXcBPEBYaybEL0wm9SNqFWfOWY0Z+JxBSAXkiFAImLiolLoZxIQAh+QQJBgAQACwAAAAAGAAIAIQEAgS0srTc2tz08vTMyszk5uT8+vw0MjS8ury0trTk4uT09vTMzszs6uz8/vw0NjT///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFWiAELYMjno4gmCfkDItoEEGANKfwAMAjnA1EjWBg1I4G14HHO5gMiWOAEZUqIAIm86eQeo/XrBbA/RqlMceS6RxVa4xZLVHI7QCHn6hQRbAWDSwoKoIiLzEQIQAh+QQJBgAXACwAAAAAGAAIAIRUVlS0srTk4uR8enz08vTExsRsbmzs6uyMjoz8+vzU1tRkYmS8urzMzsxcWly0trTk5uR8fnz09vTMyszs7uycmpz8/vz///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFY+B1SYQlntYBmeeVQJSZTEHAHCcUOUCEiwqDw4GQNGrIhGgA4DkGIsIC0ARUHsia4AKpOiGXghewyGq5YwCu4Gw6jlnJ0gu9SKvWRKH2AIt0TQN+F0FNRSISMS0XKSuLCQKKIQAh+QQJBgAXACwAAAAAGAAIAIQEAgSkpqTU1tTs7uy8vrxUVlT8+vwkIiS0srTk4uTMyswMDgz09vS8urzs6uz08vTEwsRkZmT8/vy0trTk5uTMzswUEhT///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFZOB1MY8knhJpnpchUKahIEjjnAxEE8xJHABA4VGhGQ0ighFBEA0swWBkYgxMEpfHkva4BKLBxRaBHdACCHT3C14U0VbkRWlsXgYLcERGJQxOD3Q8PkBCfyMDKygMDIoiDAIJJiEAIfkECQYAFwAsAAAAABgACACEVFZUtLK05OLkxMbE9PL0jI6MvL68bG5s7Ors1NbU/Pr8ZGJkvLq8zM7MXFpctLa05ObkzMrM9Pb0nJqcxMLE7O7s/P78////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABWPgdUmEJZ4WaZ6XAlWmEgUBg5wSRRvSmRwOR0HSoBkVIoMxYBARFgBHdPJYBgSXijVAuAykUsBii5VsK96oelFc9i5K40MkgYInigHtAcHFH28XP1EFXSMwLBcWFRIrJwoCiCEAOw=='); }" + ".smarty-ui { position: absolute; z-index: 99999; text-shadow: none; text-align: left; text-decoration: none; }" + ".smarty-popup { border: 3px solid #4C4C4C; padding: 0; background: #F6F6F6; box-shadow: 0px 10px 35px rgba(0, 0, 0, .8); }" + ".smarty-popup-header { text-transform: uppercase; font: bold 12px/1em 'Arial Black', sans-serif; padding: 12px; }" + ".smarty-popup-ambiguous-header { color: #333; }" + ".smarty-popup-invalid-header { color: #CC0000; }" + ".smarty-popup-close { color: #CC0000 !important; text-decoration: none !important; position: absolute; right: 15px; top: 10px; display: block; padding: 4px 6px; text-transform: uppercase; }" + ".smarty-popup-close:hover { color: #FFF !important; background: #CC0000; }" + ".smarty-choice-list .smarty-choice { padding: 10px 15px;}" + ".smarty-choice { display: block; font: 300 14px/1.5em sans-serif; text-decoration: none !important; border-top: 1px solid #CCC; }" + ".smarty-choice-list .smarty-choice:hover { text-decoration: none !important; }" + ".smarty-choice-alt {  }" + ".smarty-choice-alt .smarty-choice-abort, .smarty-choice-override { padding: 6px 15px; text-decoration: none !important; }" + ".smarty-choice-alt .smarty-choice:first-child { border-top: 0; }" + ".smarty-choice-override:hover { color: #CC0000 !important; }" + ".smarty-tag { position: absolute; display: none !important; overflow: hidden; font: 15px/1.2em sans-serif; text-decoration: none !important; width: 20px; height: 18px; border-radius: 25px; transition: all .25s; -moz-transition: all .25s; -webkit-transition: all .25s; -o-transition: all .25s; }" + ".smarty-tag:hover { width: 70px; text-decoration: none !important; color: #999; }" + ".smarty-tag:hover .smarty-tag-text { color: #000 !important; }" + ".smarty-tag-grayed { border: 1px solid #B4B4B4 !important; color: #999 !important; background: #DDD !important; box-shadow: inset 0 9px 15px #FFF; }" + ".smarty-tag-green { border: 1px solid #407513 !important; color: #407513 !important; background: #A6D187 !important; box-shadow: inset 0 9px 15px #E3F6D5; }" + ".smarty-tag-grayed:hover { border-color: #333 !important; }" + ".smarty-tag-check { display: none; padding-left: 4px; text-decoration: none !important; }" + ".smarty-tag-text { font-size: 12px !important; position: absolute; top: 0; left: 16px; width: 50px !important; text-align: center !important; }" + ".smarty-autocomplete { border: 1px solid #777; background: white; overflow: hidden; white-space: nowrap; box-shadow: 1px 1px 3px #555; }" + ".smarty-suggestion { display: block; color: #444; text-decoration: none !important; font-size: 12px; padding: 1px 5px; }" + ".smarty-active-suggestion { background: #EEE; color: #000; border: none; outline: none; }" + ".smarty-no-suggestions { padding: 1px 5px; font-size: 12px; color: #AAA; font-style: italic; }" + "</style>";
        this.postMappingOperations = function() {
            if (h.ui) {
                a("head").prepend(v);
                for (var f = d.getMappedAddresses(), g = 0; g < f.length; g++) {
                    var k = f[g].id();
                    a("body").append('<div class="smarty-ui"><div title="Loading..." class="smarty-dots smarty-addr-' + k + '"></div></div>');
                    var l = B(f[g].corners(!0));
                    if (a("body").append('<div class="smarty-ui" style="top: ' + l.top + "px; left: " + l.left + 'px;"><a href="javascript:" class="smarty-tag smarty-tag-grayed smarty-addr-' + k + '" title="Address not verified. Click to verify." data-addressid="' + k + '"><span class="smarty-tag-check">&#10003;</span><span class="smarty-tag-text">Verify</span></a></div>'), a(b).resize({
                            addr: f[g]
                        }, function(b) {
                            var c = b.data.addr,
                                d = B(c.corners(!0));
                            a(".smarty-tag.smarty-addr-" + c.id()).parent(".smarty-ui").css("top", d.top + "px").css("left", d.left + "px");
                            var e = c.corners();
                            if (a(".smarty-popup.smarty-addr-" + c.id()).parent(".smarty-ui").css("top", e.top + "px").css("left", e.left + "px"), h.autocomplete) {
                                var f = a(".smarty-autocomplete.smarty-addr-" + c.id()).closest(".smarty-ui"),
                                    g = c.getDomFields();
                                g.street && f.css({
                                    left: a(g.street).offset().left + "px",
                                    top: a(g.street).offset().top + a(g.street).outerHeight() + "px"
                                })
                            }
                        }), !f[g].isDomestic()) {
                        var m = a(".smarty-ui .smarty-tag.smarty-addr-" + k);
                        m.is(":visible") && m.hide(), f[g].accept({
                            address: f[g]
                        }, !1)
                    }
                }
                if (a("body").delegate(".smarty-tag-grayed", "click", function() {
                        var c = a(this).data("addressid");
                        d.verify(c)
                    }), a("body").delegate(".smarty-undo", "click", function() {
                        var c = a(this).parent().data("addressid"),
                            e = d.getMappedAddressByID(c);
                        e.undo(!0)
                    }), h.autocomplete && h.key) {
                    for (var g = 0; g < i.length; g++) {
                        for (var n = i[g], o = 0; o < n.addresses.length; o++) {
                            var p = n.addresses[o],
                                q = p.getDomFields();
                            if (q.street) {
                                var r = a(q.street),
                                    s = a('<div class="smarty-ui"></div>'),
                                    t = a('<div class="smarty-autocomplete"></div>');
                                t.addClass("smarty-addr-" + p.id()), s.data("addrID", p.id()), s.append(t), s.css({
                                    position: "absolute",
                                    left: r.offset().left + "px",
                                    top: r.offset().top + r.outerHeight() + "px"
                                }), s.hide().appendTo("body"), s.delegate(".smarty-suggestion", "click", {
                                    addr: p,
                                    containerUi: s
                                }, function(b) {
                                    var c = j.suggestions[a(this).data("suggIndex")];
                                    y(b.data.addr, c, b.data.containerUi)
                                }), s.delegate(".smarty-suggestion", "mouseover", function() {
                                    a(".smarty-active-suggestion").removeClass("smarty-active-suggestion"), a(this).addClass("smarty-active-suggestion")
                                }), s.delegate(".smarty-active-suggestion", "mouseleave", function() {
                                    a(this).removeClass("smarty-active-suggestion")
                                }), r.attr("autocomplete", "off"), r.blur({
                                    containerUi: s
                                }, function(a) {
                                    setTimeout(function(a) {
                                        return function() {
                                            a.data && a.data.containerUi.hide()
                                        }
                                    }(a), 300)
                                }), r.keydown({
                                    containerUi: s,
                                    addr: p
                                }, function(b) {
                                    var c = a(".smarty-autocomplete", b.data.containerUi),
                                        d = a(".smarty-active-suggestion:visible", c).first(),
                                        e = !1;
                                    if (9 == b.keyCode) {
                                        if (d.length > 0) {
                                            var f = b.data.addr.getDomFields();
                                            return f.zipcode ? a(f.zipcode).focus() : a(f.street).blur(), y(b.data.addr, j.suggestions[d.data("suggIndex")], b.data.containerUi), p.isFreeform() ? !0 : C(b)
                                        }
                                        return b.data.containerUi.hide(), void 0
                                    }
                                    return 40 == b.keyCode ? (d.hasClass("smarty-suggestion") || (d = a(".smarty-suggestion", c).first().mouseover(), e = !0), e || (d.next(".smarty-addr-" + b.data.addr.id() + " .smarty-suggestion").length > 0 ? d.next(".smarty-suggestion").mouseover() : d.removeClass("smarty-active-suggestion")), G(this), void 0) : 38 == b.keyCode ? (d.hasClass("smarty-suggestion") || (d = a(".smarty-suggestion", c).last().mouseover(), e = !0), e || (d.prev(".smarty-addr-" + b.data.addr.id() + " .smarty-suggestion").length > 0 ? d.prev(".smarty-suggestion").mouseover() : d.removeClass("smarty-active-suggestion")), G(this), void 0) : void 0
                                }), r.keyup({
                                    form: n,
                                    addr: p,
                                    streetField: r,
                                    containerUi: s
                                }, w)
                            }
                        }
                        a(c).keyup(function(b) {
                            27 == b.keyCode && a(".smarty-autocomplete").closest(".smarty-ui").hide()
                        })
                    }
                    setTimeout(function() {
                        a(b).resize()
                    }, 500), setTimeout(function() {
                        a(b).resize()
                    }, 1500)
                }
            }
            if (h.submitVerify)
                for (var g = 0; g < i.length; g++) {
                    var n = i[g];
                    e = function(b) {
                        if (b.data.form && b.data.form.processing || a(".smarty-active-suggestion:visible").length > 0) return C(b);
                        if (!b.data.form.allActiveAddressesAccepted()) {
                            var c = b.data.form.activeAddressesNotAccepted();
                            return c.length > 0 && A("VerificationInvoked", {
                                address: c[0],
                                invoke: b.data.invoke,
                                invokeFn: b.data.invokeFn
                            }), C(b)
                        }
                    };
                    var u = function(b, c) {
                            if (b && c) {
                                var d = [],
                                    f = a._data(b, "events");
                                if (f && f[c] && f[c].length > 0 && (d = a.extend(!0, [], f[c])), a(b).unbind(c), a(b)[c]({
                                        form: n,
                                        invoke: b,
                                        invokeFn: c
                                    }, e), "function" == typeof b["on" + c]) {
                                    var g = b["on" + c];
                                    b["on" + c] = null, a(b)[c](g)
                                }
                                for (var h = 0; h < d.length; h++) a(b)[c](d[h].data, d[h].handler)
                            }
                        },
                        x = a(h.submitSelector, n.dom);
                    x.each(function() {
                        u(this, "click")
                    }), u(n.dom, "submit")
                }
            A("MapInitialized")
        }, this.requestAutocomplete = function(b, c) {
            c.input && c.addr.isDomestic() && j && c.containerUi.show();
            var d = {
                callback: function(b, d) {
                    if (j = d, c.suggContainer.empty(), !d.suggestions || 0 == d.suggestions.length) return c.suggContainer.html('<div class="smarty-no-suggestions">No suggestions</div>'), void 0;
                    for (var e = 0; e < d.suggestions.length; e++) {
                        var f = a('<a href="javascript:" class="smarty-suggestion"><span class="glyphicon glyphicon-map-marker"></span> ' + d.suggestions[e].text.replace(/<|>/g, "") + "</a>");
                        f.data("suggIndex", e), c.suggContainer.append(f)
                    }
                    c.suggContainer.css({
                        width: Math.max(c.streetField.outerWidth(), 250) + "px"
                    }), c.containerUi.show(), q.splice(0, b)
                },
                number: m++
            };
            q[d.number] = d, a.getJSON("https://autocomplete-api.smartystreets.com/suggest?callback=?", {
                "auth-id": h.key,
                prefix: c.input,
                city_filter: h.cityFilter,
                state_filter: h.stateFilter,
                prefer: h.cityStatePreference,
                suggestions: h.autocomplete,
                geolocate: h.geolocate
            }, function(b) {
                A("AutocompleteReceived", a.extend(c, {
                    json: b,
                    autocplrequest: d
                }))
            })
        }, this.showAutocomplete = function(a, b) {
            q[b.autocplrequest.number] && q[b.autocplrequest.number].callback(b.autocplrequest.number, b.json)
        }, this.clean = function() {
            if (0 != i.length) {
                h.debug && console.log("Cleaning up old form map data and bindings...");
                for (var d = 0; d < i.length; d++) {
                    a(i[d].dom).data(f.formDataProperty, "");
                    for (var g = 0; g < i[d].addresses.length; g++) {
                        var j = i[d].addresses[g].getDomFields();
                        for (var l in j) h.debug && a(j[l]).css("background", "none").attr("placeholder", ""), a(j[l]).unbind("change");
                        j.street && a(j.street).unbind("keyup").unbind("keydown").unbind("blur")
                    }
                    a.each(i, function() {
                        a(this.dom).unbind("submit", e)
                    }), a(h.submitSelector, i[d].dom).each(function() {
                        a(this).unbind("click", e)
                    })
                }
                a(".smarty-ui").undelegate(".smarty-suggestion", "click").undelegate(".smarty-suggestion", "mouseover").undelegate(".smarty-suggestion", "mouseleave").remove(), a("body").undelegate(".smarty-undo", "click"), a("body").undelegate(".smarty-tag-grayed", "click"), a(b).unbind("resize"), a(c).unbind("keyup"), i = [], k = 0, h.debug && console.log("Done cleaning up; ready for new mapping.")
            }
        }, this.automap = function(b) {
            h.debug && console.log("Automapping fields..."), this.clean(), a("form").each(function(c) {
                var d = new s(this),
                    e = {};
                for (var g in f.identifiers) {
                    var j = f.identifiers[g].names,
                        l = f.identifiers[g].labels;
                    e[g] = a(h.fieldSelector, this).filter(function() {
                        return a(b).has(this).length > 0
                    }).filter(":visible").filter(function() {
                        var a = z(this.name),
                            b = z(this.id);
                        if ("streets" == g)
                            for (var c = 0; c < f.street1exacts.names.length; c++)
                                if (a == f.street1exacts.names[c] || b == f.street1exacts.names[c]) return !0;
                        var d = D(this, j, l);
                        if ("streets" == g)
                            for (var e = ["secondary", "city", "state", "zipcode", "country", "lastline"], c = 0; c < e.length; c++)
                                if (D(this, f.identifiers[e[c]].names, f.identifiers[e[c]].labels)) return !1;
                        return d
                    }).not(function() {
                        var a = z(this.name),
                            b = z(this.id);
                        return "name" == a || "name" == b ? !0 : D(this, f.exclude.names, f.exclude.labels)
                    }).toArray()
                }
                if (e.street = [], e.street2 = [], e.streets.length <= 1.5 * e.city.length || e.streets.length <= 1.5 * e.zipcode.length) e.street = e.streets;
                else
                    for (var m = 0; m < e.streets.length; m++) {
                        var n = e.streets[m];
                        D(n, f.street2.names, f.street2.labels) || m > 0 && n.name == e.streets[m - 1].name ? e.street2.push(n) : e.street.push(n)
                    }
                delete e.streets, h.debug && console.log("For form " + c + ", the initial scan found these fields:", e);
                var o = Math.max(e.street.length, e.street2.length);
                h.debug && 0 == o && console.log("No addresses were found in form " + c + ".");
                for (var m = 0; o > m; m++) {
                    var p = {};
                    for (var q in e) {
                        var n = e[q][m];
                        n && (p[q] = n)
                    }
                    var t = p.zipcode || p.state && p.city,
                        u = p.city || p.state || p.zipcode;
                    !p.street && t || p.street && !t && u ? h.debug && console.log("Form " + c + " contains some address input elements that could not be resolved to a complete address.") : d.addresses.push(new r(p, d, "auto" + ++k))
                }
                H(d.dom), I(d.dom), i.push(d), h.debug && console.log("Form " + c + " is finished:", d)
            }), h.debug && console.log("Automapping complete."), A("FieldsMapped")
        }, this.mapFields = function(b, c) {
            h.debug && console.log("Manually mapping fields given this data:", b), this.clean();
            var d = [];
            b = b instanceof Array ? b : [b];
            for (var e in b) {
                var g = b[e];
                if (g.street) {
                    for (var j in g)
                        if ("id" != j) {
                            if (!x(l, j)) {
                                h.debug && console.log("NOTICE: Field named " + j + " is not allowed. Skipping..."), delete g[j];
                                continue
                            }
                            var m = a(g[j], c);
                            if (0 == m.length) {
                                h.debug && console.log("NOTICE: No matches found for selector " + g[j] + ". Skipping..."), delete g[j];
                                continue
                            }
                            if (0 == m.parents("form").length) {
                                h.debug && console.log('NOTICE: Element with selector "' + g[j] + '" is not inside a <form> tag. Skipping...'), delete g[j];
                                continue
                            }
                            g[j] = m[0]
                        }
                    if (g.street && (g.city && g.state || g.zipcode || g.lastline || !(g.street2 || g.city || g.state || g.zipcode || g.lastline))) {
                        var n = a(g.street).parents("form")[0],
                            o = new s(n);
                        if (a(n).data(f.formDataProperty)) {
                            for (var p = 0; p < d.length; p++)
                                if (d[p].dom == n) {
                                    o = d[p];
                                    break
                                }
                        } else a(n).data(f.formDataProperty, 1), H(o.dom), I(o.dom), d.push(o);
                        k++, o.addresses.push(new r(g, o, g.id)), h.debug && console.log("Finished mapping address with ID: " + o.addresses[o.addresses.length - 1].id())
                    } else h.debug && console.log("NOTICE: Address map (index " + e + ") was not mapped to a complete street address. Skipping...")
                }
            }
            i = d, A("FieldsMapped")
        }, this.disableFields = function(b) {
            if (h.ui) {
                var c = b.getDomFields();
                for (var d in c) a(c[d]).prop ? a(c[d]).prop("disabled", !0) : a(c[d]).attr("disabled", "disabled");
                if (b.form && b.form.dom) {
                    var e = a(h.submitSelector, b.form.dom);
                    e.prop ? e.prop("disabled", !0) : e.attr("disabled", "disabled")
                }
            }
        }, this.enableFields = function(b) {
            if (h.ui) {
                var c = b.getDomFields();
                for (var d in c) a(c[d]).prop ? a(c[d]).prop("disabled", !1) : a(c[d]).removeAttr("disabled");
                if (b.form && b.form.dom) {
                    var e = a(h.submitSelector, b.form.dom);
                    e.prop ? e.prop("disabled", !1) : e.removeAttr("disabled")
                }
            }
        }, this.showLoader = function(b) {
            if (h.ui && b.hasDomFields()) {
                var c = b.corners(!0),
                    d = a(".smarty-dots.smarty-addr-" + b.id()).parent();
                d.css("top", c.top + c.height / 2 - u / 2 + "px").css("left", c.right - t - 10 + "px"), a(".smarty-dots", d).show()
            }
        }, this.hideLoader = function(b) {
            h.ui && a(".smarty-dots.smarty-addr-" + b.id()).hide()
        }, this.markAsValid = function(b) {
            if (h.ui && b) {
                var c = a(".smarty-tag.smarty-tag-grayed.smarty-addr-" + b.id());
                c.removeClass("smarty-tag-grayed").addClass("smarty-tag-green").attr("title", "Address verified! Click to undo."), a(".smarty-tag-text", c).text("Verified").hover(function() {
                    a(this).text("Undo")
                }, function() {
                    a(this).text("Verified")
                }).addClass("smarty-undo")
            }
        }, this.unmarkAsValid = function(b) {
            var c = ".smarty-tag.smarty-addr-" + b.id();
            if (h.ui && b && 0 != a(c).length) {
                var d = a(".smarty-tag.smarty-tag-green.smarty-addr-" + b.id());
                d.removeClass("smarty-tag-green").addClass("smarty-tag-grayed").attr("title", "Address not verified. Click to verify."), a(".smarty-tag-text", d).text("Verify").unbind("mouseenter mouseleave").removeClass("smarty-undo")
            }
        }, this.showAmbiguous = function(d) {
            if (h.ui && d.address.hasDomFields()) {
                var e = d.address,
                    f = d.response,
                    i = e.corners();
                i.width = Math.max(i.width, 300), i.height = Math.max(i.height, 63 * f.length + 119);
                for (var j = '<div class="smarty-ui" style="top: ' + i.top + "px; left: " + i.left + 'px;">' + '<div class="smarty-popup smarty-addr-' + e.id() + '">' + '<div class="smarty-popup-header smarty-popup-ambiguous-header">' + h.ambiguousMessage + '<a href="javascript:" class="smarty-popup-close smarty-abort" title="Cancel"><span class="glyphicon glyphicon-remove-circle"></span></a></div>' + '<div class="smarty-choice-list">', k = 0; k < f.raw.length; k++) {
                    var l = f.raw[k].delivery_line_1,
                        m = f.raw[k].components.city_name,
                        n = f.raw[k].components.state_abbreviation,
                        o = f.raw[k].components.zipcode + "-" + f.raw[k].components.plus4_code;
                    j += '<a href="javascript:" class="smarty-choice" data-index="' + k + '">' + l + "<br>" + m + ", " + n + " " + o + "</a>"
                }
                j += '</div><div class="smarty-choice-alt">', j += '<a href="javascript:" class="smarty-choice smarty-choice-override">Click here to certify the address is correct<br>(' + e.toString() + ")</a>", j += '<a href="javascript:" class="btn btn-primary smarty-choice smarty-choice-abort smarty-abort">Change Address</a>', j += "</div></div></div>", a(j).hide().appendTo("body").show(g.speed), (a(c).scrollTop() > i.top - 100 || a(c).scrollTop() < i.top - a(b).height() + 100) && a("html, body").stop().animate({
                    scrollTop: a(".smarty-popup.smarty-addr-" + e.id()).offset().top - 100
                }, 500), d.selectors = {
                    goodAddr: ".smarty-popup.smarty-addr-" + e.id() + " .smarty-choice-list .smarty-choice",
                    useOriginal: ".smarty-popup.smarty-addr-" + e.id() + " .smarty-choice-override",
                    abort: ".smarty-popup.smarty-addr-" + e.id() + " .smarty-abort"
                }, a("body").delegate(d.selectors.goodAddr, "click", d, function(b) {
                    a(".smarty-popup.smarty-addr-" + e.id()).slideUp(g.speed, function() {
                        a(this).parent(".smarty-ui").remove(), a(this).remove()
                    }), F(b.data.selectors), delete b.data.selectors, A("UsedSuggestedAddress", {
                        address: b.data.address,
                        response: b.data.response,
                        invoke: b.data.invoke,
                        invokeFn: b.data.invokeFn,
                        chosenCandidate: f.raw[a(this).data("index")]
                    })
                }), a("body").delegate(d.selectors.useOriginal, "click", d, function(b) {
                    a(this).parents(".smarty-popup").slideUp(g.speed, function() {
                        a(this).parent(".smarty-ui").remove(), a(this).remove()
                    }), F(b.data.selectors), delete b.data.selectors, A("OriginalInputSelected", b.data)
                }), a(c).keyup(d, function(b) {
                    27 == b.keyCode && (F(b.data.selectors), delete b.data.selectors, E(a(".smarty-popup.smarty-addr-" + b.data.address.id()), b), C(b))
                }), a("body").delegate(d.selectors.abort, "click", d, function(b) {
                    F(b.data.selectors), delete b.data.selectors, E(a(this).parents(".smarty-popup"), b)
                })
            }
        }, this.showInvalid = function(d) {
            if (h.ui && d.address.hasDomFields()) {
                var e = d.address;
                d.response;
                var i = e.corners();
                i.width = Math.max(i.width, 300), i.height = Math.max(i.height, 180);
                var j = '<div class="smarty-ui" style="top: ' + i.top + "px; left: " + i.left + 'px;">' + '<div class="smarty-popup smarty-addr-' + e.id() + '">' + '<div class="smarty-popup-header smarty-popup-invalid-header">' + h.invalidMessage + '<a href="javascript:" class="smarty-popup-close smarty-abort" title="Cancel"><span class="glyphicon glyphicon-remove-circle"></span></a></div>' + '<div class="smarty-choice-alt"><a href="javascript:" class="smarty-choice smarty-choice-override">Click here to certify the address is correct<br>(' + e.toString() + ")</a></div>" + '<div class="smarty-choice-alt smarty-button"><a href="javascript:" class="btn btn-primary smarty-choice smarty-choice-abort smarty-abort">Change Address</a></div>' + "</div></div>";
                a(j).hide().appendTo("body").show(g.speed), d.selectors = {
                    useOriginal: ".smarty-popup.smarty-addr-" + e.id() + " .smarty-choice-override ",
                    abort: ".smarty-popup.smarty-addr-" + e.id() + " .smarty-abort"
                }, (a(c).scrollTop() > i.top - 100 || a(c).scrollTop() < i.top - a(b).height() + 100) && a("html, body").stop().animate({
                    scrollTop: a(".smarty-popup.smarty-addr-" + e.id()).offset().top - 100
                }, 500), a("body").delegate(d.selectors.abort, "click", d, function(a) {
                    E(".smarty-popup.smarty-addr-" + a.data.address.id(), a), delete a.data.selectors, A("InvalidAddressRejected", a.data)
                }), a("body").delegate(d.selectors.useOriginal, "click", d, function(a) {
                    E(".smarty-popup.smarty-addr-" + a.data.address.id(), a), delete a.data.selectors, A("OriginalInputSelected", a.data)
                }), a(c).keyup(d, function(b) {
                    27 == b.keyCode && (a(d.selectors.abort).click(), F(b.data.selectors), E(".smarty-popup.smarty-addr-" + b.data.address.id(), b))
                })
            }
        }, this.isDropdown = function(a) {
            return a && "SELECT" == (a.tagName || a.nodeName || "").toUpperCase()
        }
    }

    function q(a) {
        this.standard = function() {
            for (var b in o) {
                var c = o[b],
                    d = a.text.toUpperCase();
                if (d.indexOf(c) > -1) return n[c];
                var e = a.value.toUpperCase();
                if (e.indexOf(c) > -1) return n[c]
            }
            for (var b in p) {
                var f = p[b],
                    g = a.text.split(/[ ,]+/);
                for (var h in g) {
                    var i = g[h].toUpperCase();
                    if (f === i) return f
                }
                var g = a.value.split(/[ ,]+/);
                for (var h in g) {
                    var i = g[h].toUpperCase();
                    if (f === i) return f
                }
            }
            return ""
        }, this.value = function() {
            return a.value ? a.value : a.text
        }
    }

    function r(b, c, f) {
        var i, j, g = this,
            k = {},
            m = 0,
            n = "accepted",
            o = function(b, c, d, f, n, o) {
                if (!x(l, b)) return !1;
                i[b] || (i[b] = {}), c = c.replace(/<|>/g, "");
                var p = i[b].value != c;
                i[b].undo = i[b].value || "", i[b].value = c, d && i[b].dom && ("state" === b && m > 0 && c in k && (c = k[c].value()), a(i[b].dom).val(c));
                var q = {
                    sourceEvent: n,
                    field: b,
                    address: g,
                    value: c,
                    suppressAutoVerification: o || !1
                };
                if (p && !f) {
                    e.unmarkAsValid(g);
                    var r = h.ui ? a(".smarty-ui .smarty-tag.smarty-addr-" + j) : void 0;
                    g.isDomestic() ? (r && !r.is(":visible") && r.show(), g.unaccept(), A("AddressChanged", q)) : (r && r.is(":visible") && r.hide(), g.accept({
                        address: g
                    }, !1))
                }
                return !0
            };
        this.form = c, this.verifyCount = 0, this.lastField, this.active = !0, this.lastStreetInput = "", this.load = function(b, c) {
            if (i = {}, j = c ? c.replace(/[^a-z0-9_\-]/gi, "") : y(1, 99999), "object" == typeof b) {
                this.lastField = b.lastline || b.zipcode || b.state || b.city || b.street;
                var d = !0;
                for (var f in b)
                    if (x(l, f)) {
                        var g, o, p, r;
                        try {
                            g = a(b[f]), p = g.toArray(), r = p ? 0 == p.length : !1
                        } catch (s) {
                            r = !0
                        }
                        o = r ? b[f] || "" : g.val() || "", "state" === f && void 0 != p[0] && void 0 != p[0].length && a("option", g).each(function() {
                            var b = new q(this),
                                c = b.standard();
                            k[c] = b, m++
                        }), i[f] = {}, i[f].value = o, i[f].undo = o, d = d ? 0 == o.length || e.isDropdown(b[f]) : !1, r || (h.debug && (g.css("background", "#FFFFCC"), g.attr("placeholder", f + ":" + j)), i[f].dom = b[f]);
                        var t = {
                            address: this,
                            field: f,
                            value: o
                        };
                        !r && a(b[f]).change(t, function(a) {
                            a.data.address.set(a.data.field, a.target.value, !1, !1, a, !1)
                        })
                    }
                d || (n = "changed")
            }
        }, this.load(b, f), this.set = function(a, b, c, d, e, f) {
            if ("string" == typeof a && arguments.length >= 2) return o(a, b, c, d, e, f);
            if ("object" == typeof a) {
                var g = !0;
                for (var h in a) g = o(h, a[h], c, d, e, f) ? g : !1;
                return g
            }
        }, this.replaceWith = function(a, b, c) {
            if ("array" == typeof a && a.length > 0 && (a = a[0]), g.isFreeform()) {
                var d = (a.addressee ? a.addressee + " " : "") + (a.delivery_line_1 ? a.delivery_line_1 + " " : "") + (a.delivery_line_2 ? a.delivery_line_2 + " " : "") + (a.components.urbanization ? a.components.urbanization + " " : "") + (a.last_line ? a.last_line : "");
                g.set("street", d, b, !0, c, !1)
            } else a.addressee && g.set("addressee", a.addressee, b, !0, c, !1), a.delivery_line_1 && g.set("street", a.delivery_line_1, b, !0, c, !1), a.last_line && i.lastline && g.set("lastline", a.last_line, b, !0, c, !1), g.set("street2", a.delivery_line_2 || "", b, !0, c, !1), g.set("secondary", "", b, !0, c, !1), a.components.urbanization && g.set("urbanization", a.components.urbanization, b, !0, c, !1), a.components.city_name && g.set("city", a.components.city_name, b, !0, c, !1), a.components.state_abbreviation && g.set("state", a.components.state_abbreviation, b, !0, c, !1), a.components.zipcode && a.components.plus4_code && g.set("zipcode", a.components.zipcode + "-" + a.components.plus4_code, b, !0, c, !1)
        }, this.corners = function(b) {
            var c = {};
            if (b) {
                var h = a(g.lastField);
                c = h.offset(), c.right = c.left + h.outerWidth(), c.bottom = c.top + h.outerHeight()
            } else
                for (var d in i)
                    if (i[d].dom && a(i[d].dom).is(":visible")) {
                        var e = i[d].dom,
                            f = a(e).offset();
                        f.right = f.left + a(e).outerWidth(), f.bottom = f.top + a(e).outerHeight(), c.top = c.top ? Math.min(c.top, f.top) : f.top, c.left = c.left ? Math.min(c.left, f.left) : f.left, c.right = c.right ? Math.max(c.right, f.right) : f.right, c.bottom = c.bottom ? Math.max(c.bottom, f.bottom) : f.bottom
                    } return c.width = c.right - c.left, c.height = c.bottom - c.top, c
        }, this.verify = function(b, c) {
            if (!b && !g.enoughInput()) return h.debug && console.log("NOTICE: The address does not have enough input to verify. Since no callback is specified, there is nothing to do."), A("Completed", {
                address: g,
                invoke: b,
                invokeFn: c,
                response: new t([])
            });
            if (!g.enoughInput()) return A("AddressWasInvalid", {
                address: g,
                response: new t([]),
                invoke: b,
                invokeFn: c
            });
            e.disableFields(g), g.verifyCount++;
            var f = g.toRequest(),
                i = h.token ? "auth-id=" + encodeURIComponent(h.key) + "&auth-token=" + encodeURIComponent(h.token) : "auth-token=" + encodeURIComponent(h.key);
            a.ajax({
                url: h.requestUrl + "?" + i + "&plugin=" + encodeURIComponent(d.version) + (h.debug ? "_debug" : "") + "&callback=?",
                dataType: "jsonp",
                data: f,
                timeout: h.timeout
            }).done(function(a) {
                A("ResponseReceived", {
                    address: g,
                    response: new t(a),
                    invoke: b,
                    invokeFn: c
                })
            }).fail(function(a, d) {
                A("RequestTimedOut", {
                    address: g,
                    status: d,
                    invoke: b,
                    invokeFn: c
                }), g.verifyCount--
            }), A("RequestSubmitted", {
                address: g
            })
        }, this.enoughInput = function() {
            var a;
            return i.state && (a = i.state.value, void 0 !== i.state.dom && void 0 !== i.state.dom.length && (a = i.state.dom.selectedIndex < 1 ? "" : i.state.dom.options[i.state.dom.selectedIndex].text)), i.street && i.street.value && (i.city && i.city.value && i.state && a.length > 0 || i.zipcode && i.zipcode.value || i.lastline && i.lastline.value || !i.street2 && !i.city && !i.state && !i.zipcode && !i.lastline)
        }, this.toRequest = function() {
            var b = {};
            i.hasOwnProperty("lastline") && i.hasOwnProperty("city") && i.hasOwnProperty("state") && i.hasOwnProperty("zipcode") && (delete i.city, delete i.state, delete i.zipcode);
            for (var c in i) {
                var d = {};
                d[c] = "state" === c && i[c].dom.length > 0 ? i[c].dom[i[c].dom.selectedIndex].text : i[c].value.replace(/\r|\n/g, " "), a.extend(b, d)
            }
            return a.extend(b, {
                candidates: h.candidates
            })
        }, this.toString = function() {
            if (i.state) {
                var a = i.state.value;
                i.state.dom.length > 0 && (a = i.state.dom[i.state.dom.selectedIndex].text)
            }
            return (i.street ? i.street.value + " " : "") + (i.street2 ? i.street2.value + " " : "") + (i.secondary ? i.secondary.value + " " : "") + (i.city ? i.city.value + " " : "") + (i.state ? a + " " : "") + (i.zipcode ? i.zipcode.value : "")
        }, this.abort = function(a, b) {
            return b = "undefined" == typeof b ? !1 : b, b || g.unaccept(), delete g.form.processing, C(a)
        }, this.isFreeform = function() {
            return !(!i.street || i.street2 || i.secondary || i.addressee || i.city || i.state || i.zipcode || i.urbanization || i.lastline)
        }, this.get = function(a) {
            return i[a] ? i[a].value : null
        }, this.undo = function(a) {
            a = "undefined" == typeof a ? !0 : a;
            for (var b in i) this.set(b, i[b].undo, a, !1, void 0, !0)
        }, this.accept = function(a, b) {
            b = "undefined" == typeof b ? !0 : b, n = "accepted", e.enableFields(g), b && e.markAsValid(g), A("AddressAccepted", a)
        }, this.unaccept = function() {
            return n = "changed", e.unmarkAsValid(g), g
        }, this.getUndoValue = function(a) {
            return i[a].undo
        }, this.status = function() {
            return n
        }, this.getDomFields = function() {
            var b = {};
            for (var c in i) {
                var d = {};
                d[c] = i[c].dom, a.extend(b, d)
            }
            return b
        }, this.hasDomFields = function() {
            for (var a in i)
                if (i[a].dom) return !0
        }, this.isDomestic = function() {
            if (!i.country) return !0;
            var a = i.country.value.toUpperCase().replace(/\.|\s|\(|\)|\\|\/|-/g, ""),
                b = ["", "0", "1", "COUNTRY", "NONE", "US", "USA", "USOFA", "USOFAMERICA", "AMERICAN", "UNITEDSTATES", "UNITEDSTATESAMERICA", "UNITEDSTATESOFAMERICA", "AMERICA", "840", "223", "AMERICAUNITEDSTATES", "AMERICAUS", "AMERICAUSA"];
            return x(b, a) || "-1" == i.country.value
        }, this.autocompleteVisible = function() {
            return h.ui && h.autocomplete && a(".smarty-autocomplete.smarty-addr-" + g.id()).is(":visible")
        }, this.id = function() {
            return j
        }
    }

    function s(a) {
        this.addresses = [], this.dom = a, this.activeAddressesNotAccepted = function() {
            for (var a = [], b = 0; b < this.addresses.length; b++) {
                var c = this.addresses[b];
                "accepted" != c.status() && c.active && a.push(c)
            }
            return a
        }, this.allActiveAddressesAccepted = function() {
            return 0 == this.activeAddressesNotAccepted().length
        }
    }

    function t(a) {
        var b = function(b) {
                if (b >= a.length || 0 > b) throw 0 == a.length ? new Error("Candidate index is out of bounds (no candidates returned; requested " + b + ")") : new Error("Candidate index is out of bounds (" + a.length + " candidates; indicies 0 through " + (a.length - 1) + " available; requested " + b + ")")
            },
            c = function(a) {
                return "undefined" == typeof a ? 0 : a
            };
        this.raw = a, this.length = a.length, this.isValid = function() {
            return 1 == this.length
        }, this.isInvalid = function() {
            return 0 == this.length
        }, this.isAmbiguous = function() {
            return this.length > 1
        }, this.isMissingSecondary = function(a) {
            return a = c(a), b(a), this.raw[a].analysis.dpv_footnotes.indexOf("N1") > -1 || this.raw[a].analysis.dpv_footnotes.indexOf("R1") > -1 || this.raw[a].analysis.footnotes && this.raw[a].analysis.footnotes.indexOf("H#") > -1
        }, this.isBadSecondary = function(a) {
            return a = c(a), b(a), this.raw[a].analysis.footnotes && this.raw[a].analysis.footnotes.indexOf("S#") > -1
        }, this.componentChanged = function(a) {
            return a = c(a), b(a), this.raw[a].analysis.footnotes && this.raw[a].analysis.footnotes.indexOf("L#") > -1
        }, this.betterAddressExists = function(a) {
            return a = c(a), b(a), this.raw[a].analysis.footnotes && this.raw[a].analysis.footnotes.indexOf("P#") > -1
        }, this.isExactMatch = function(a) {
            return a = c(a), b(a), this.raw[a].analysis.footnotes && "AABB" == this.raw[a].analysis.dpv_footnotes
        }, this.isUniqueZipCode = function(a) {
            return a = c(a), b(a), this.raw[a].analysis.dpv_footnotes.indexOf("U1") > -1 || this.raw[a].analysis.footnotes && this.raw[a].analysis.footnotes.indexOf("Q#") > -1
        }, this.fixedAbbreviations = function(a) {
            return a = c(a), b(a), this.raw[a].analysis.footnotes && this.raw[a].analysis.footnotes.indexOf("N#") > -1
        }, this.fixedZipCode = function(a) {
            return a = c(a), b(a), this.raw[a].analysis.footnotes && this.raw[a].analysis.footnotes.indexOf("A#") > -1
        }, this.fixedSpelling = function(a) {
            return a = c(a), b(a), this.raw[a].analysis.footnotes.indexOf("B#") > -1 || this.raw[a].analysis.footnotes && this.raw[a].analysis.footnotes.indexOf("M#") > -1
        }, this.isBuildingDefault = function(a) {
            return a = c(a), b(a), this.raw[a].metadata.building_default_indicator
        }, this.isMilitary = function(a) {
            return a = c(a), b(a), this.raw[a].analysis.dpv_footnotes.indexOf("F1") > -1
        }, this.hasExtraSecondary = function(a) {
            return a = c(a), b(a), this.raw[a].analysis.dpv_footnotes.indexOf("CC") > -1
        }, this.isLacsLink = function(a) {
            return a = c(a), b(a), "A" == this.raw[a].analysis.lacslink_code
        }, this.isCommercial = function(a) {
            return a = c(a), b(a), "Commercial" == this.raw[a].metadata.rdi
        }, this.isResidential = function(a) {
            return a = c(a), b(a), "Residential" == this.raw[a].metadata.rdi
        }
    }

    function u(a, b) {
        var c = w[a.type];
        c && c(a, b)
    }

    function x(a, b) {
        for (var c in a)
            if (a[c] === b) return !0;
        return !1
    }

    function y(a, b) {
        return Math.floor(Math.random() * (b - a + 1)) + a
    }

    function z(a) {
        return a ? a.toLowerCase().replace("[]", "") : ""
    }

    function A(b, d) {
        a(c).triggerHandler(b, d)
    }

    function B(b) {
        a(c).bind(b, u)
    }

    function C(a) {
        return a ? (a.preventDefault && a.preventDefault(), a.stopPropagation && a.stopPropagation(), a.stopImmediatePropagation && a.stopImmediatePropagation(), a.cancelBubble = !0, !1) : !1
    }
    var d, e = new m,
        f = "2.6.0",
        g = {
            candidates: 3,
            autocomplete: 10,
            requestUrl: "https://api.smartystreets.com/street-address",
            timeout: 5e3,
            speed: "medium",
            ambiguousMessage: "Choose the correct address",
            invalidMessage: "Address not verified",
            fieldSelector: "input[type=text], input:not([type]), textarea, select",
            submitSelector: "[type=submit], [type=image], [type=button]:last, button:last"
        },
        h = {},
        i = [],
        j = "body",
        k = 0,
        l = ["street", "street2", "secondary", "city", "state", "zipcode", "lastline", "addressee", "urbanization", "country"];
    a.LiveAddress = function(b) {
        return a(j).LiveAddress(b)
    }, a.fn.LiveAddress = function(j) {
        if (d) return d;
        var k = this,
            l = k.prevObject ? !!k.prevObject.prevObject : !1,
            m = a.fn.jquery.split(".");
        if (!(m.length >= 2)) return !1;
        if (m[0] < 1 || 1 == m[0] && m[1] < 5) return console.log("jQuery version " + a.fn.jquery + " found, but LiveAddress requires jQuery version 1.5 or higher. Aborting."), !1;
        j.debug && console.log("LiveAddress API jQuery Plugin version " + f + " (Debug mode)"), "complete" === c.readyState ? b.loaded = !0 : a(b).load(function() {
            b.loaded = !0
        }), "string" == typeof j ? h = {
            key: j,
            candidates: g.candidates
        } : "object" == typeof j && (h = a.extend(h, j)), h.candidates = h.candidates || g.candidates, h.ui = "undefined" == typeof h.ui ? !0 : h.ui, h.autoMap = "undefined" == typeof h.autoMap ? !0 : h.autoMap, h.autoVerify = "undefined" == typeof h.autoVerify ? !0 : h.autoVerify, h.submitVerify = "undefined" == typeof h.submitVerify ? !0 : h.submitVerify, h.timeout = h.timeout || g.timeout, h.ambiguousMessage = h.ambiguousMessage || g.ambiguousMessage, h.invalidMessage = h.invalidMessage || g.invalidMessage, h.fieldSelector = h.fieldSelector || g.fieldSelector, h.submitSelector = h.submitSelector || g.submitSelector, h.requestUrl = h.requestUrl || g.requestUrl, h.autocomplete = "undefined" == typeof h.autocomplete ? g.autocomplete : h.autocomplete, h.cityFilter = "undefined" == typeof h.cityFilter ? "" : h.cityFilter, h.stateFilter = "undefined" == typeof h.stateFilter ? "" : h.stateFilter, h.cityStatePreference = "undefined" == typeof h.cityStatePreference ? "" : h.cityStatePreference, h.geolocate = "undefined" == typeof h.geolocate ? !0 : h.geolocate, h.candidates = h.candidates < 1 ? 0 : h.candidates > 10 ? 10 : h.candidates, "number" == typeof h.autocomplete && (h.autocomplete = h.autocomplete < 1 ? !1 : h.autocomplete > 10 ? 10 : h.autocomplete), d = {
            events: w,
            on: function(a, b) {
                if (!w[a] || "function" != typeof b) return !1;
                var c = w[a];
                w[a] = function(a, d) {
                    b(a, d, c)
                }
            },
            mapFields: function(b) {
                var c = function(a) {
                    return "auto" === a ? e.automap(k) : "object" == typeof a ? e.mapFields(a, k) : a || "object" != typeof h.addresses ? h.autoMap ? e.automap(k) : !1 : e.mapFields(h.addresses, k)
                };
                a.isReady ? c(b) : a(function() {
                    l || (k = a(k.selector)), c(b)
                })
            },
            makeAddress: function(a) {
                return "object" != typeof a ? d.getMappedAddressByID(a) || new r({
                    street: a
                }) : new r(a)
            },
            verify: function(a, b) {
                var c = d.makeAddress(a);
                A("VerificationInvoked", {
                    address: c,
                    verifyAccepted: !0,
                    invoke: b
                })
            },
            getMappedAddresses: function() {
                for (var a = [], b = 0; b < i.length; b++)
                    for (var c = 0; c < i[b].addresses.length; c++) a.push(i[b].addresses[c]);
                return a
            },
            getMappedAddressByID: function(a) {
                for (var b = 0; b < i.length; b++)
                    for (var c = 0; c < i[b].addresses.length; c++)
                        if (i[b].addresses[c].id() == a) return i[b].addresses[c]
            },
            setKey: function(a) {
                h.key = a
            },
            setCityFilter: function(a) {
                h.cityFilter = a
            },
            setStateFilter: function(a) {
                h.stateFilter = a
            },
            setCityStatePreference: function(a) {
                h.cityStatePreference = a
            },
            activate: function(a) {
                var b = d.getMappedAddressByID(a);
                b && (b.active = !0)
            },
            deactivate: function(a) {
                if (!a) return e.clean();
                var b = d.getMappedAddressByID(a);
                b && (b.active = !1)
            },
            autoVerify: function(a) {
                return "undefined" == typeof a ? h.autoVerify : (h.autoVerify = "disable" !== a && "off" !== a && a ? !0 : !1, void 0)
            },
            version: f
        };
        for (var n in w) B(n);
        return d.mapFields(), d
    };
    var n = {
            ALABAMA: "AL",
            ALASKA: "AK",
            "AMERICAN SAMOA": "AS",
            ARIZONA: "AZ",
            ARKANSAS: "AR",
            CALIFORNIA: "CA",
            COLORADO: "CO",
            CONNECTICUT: "CT",
            DELAWARE: "DE",
            "DISTRICT OF COLUMBIA": "DC",
            "FEDERATED STATES OF MICRONESIA": "FM",
            FLORIDA: "FL",
            GEORGIA: "GA",
            GUAM: "GU",
            HAWAII: "HI",
            IDAHO: "ID",
            ILLINOIS: "IL",
            INDIANA: "IN",
            IOWA: "IA",
            KANSAS: "KS",
            KENTUCKY: "KY",
            LOUISIANA: "LA",
            MAINE: "ME",
            "MARSHALL ISLANDS": "MH",
            MARYLAND: "MD",
            MASSACHUSETTS: "MA",
            MICHIGAN: "MI",
            MINNESOTA: "MN",
            MISSISSIPPI: "MS",
            MISSOURI: "MO",
            MONTANA: "MT",
            NEBRASKA: "NE",
            NEVADA: "NV",
            "NEW HAMPSHIRE": "NH",
            "NEW JERSEY": "NJ",
            "NEW MEXICO": "NM",
            "NEW YORK": "NY",
            "NORTH CAROLINA": "NC",
            "NORTH DAKOTA": "ND",
            "NORTHERN MARIANA ISLANDS": "MP",
            OHIO: "OH",
            OKLAHOMA: "OK",
            OREGON: "OR",
            PALAU: "PW",
            PENNSYLVANIA: "PA",
            "PUERTO RICO": "PR",
            "RHODE ISLAND": "RI",
            "SOUTH CAROLINA": "SC",
            "SOUTH DAKOTA": "SD",
            TENNESSEE: "TN",
            TEXAS: "TX",
            UTAH: "UT",
            VERMONT: "VT",
            "VIRGIN ISLANDS": "VI",
            VIRGINIA: "VA",
            WASHINGTON: "WA",
            "WEST VIRGINIA": "WV",
            WISCONSIN: "WI",
            WYOMING: "WY",
            "ARMED FORCES EUROPE, THE MIDDLE EAST, AND CANADA": "AE",
            "ARMED FORCES CANADA": "AE",
            "ARMED FORCES THE MIDDLE EAST": "AE",
            "ARMED FORCES EUROPE": "AE",
            "ARMED FORCES PACIFIC": "AP",
            "ARMED FORCES AMERICAS (EXCEPT CANADA)": "AA",
            "ARMED FORCES AMERICAS": "AA"
        },
        o = ["ALABAMA", "ALASKA", "AMERICAN SAMOA", "ARIZONA", "ARKANSAS", "CALIFORNIA", "COLORADO", "CONNECTICUT", "DELAWARE", "DISTRICT OF COLUMBIA", "FEDERATED STATES OF MICRONESIA", "FLORIDA", "GEORGIA", "GUAM", "HAWAII", "IDAHO", "ILLINOIS", "INDIANA", "IOWA", "KANSAS", "KENTUCKY", "LOUISIANA", "MAINE", "MARSHALL ISLANDS", "MARYLAND", "MASSACHUSETTS", "MICHIGAN", "MINNESOTA", "MISSISSIPPI", "MISSOURI", "MONTANA", "NEBRASKA", "NEVADA", "NEW HAMPSHIRE", "NEW JERSEY", "NEW MEXICO", "NEW YORK", "NORTH CAROLINA", "NORTH DAKOTA", "NORTHERN MARIANA ISLANDS", "OHIO", "OKLAHOMA", "OREGON", "PALAU", "PENNSYLVANIA", "PUERTO RICO", "RHODE ISLAND", "SOUTH CAROLINA", "SOUTH DAKOTA", "TENNESSEE", "TEXAS", "UTAH", "VERMONT", "WEST VIRGINIA", "VIRGINIA", "VIRGIN ISLANDS", "WASHINGTON", "WISCONSIN", "WYOMING", "ARMED FORCES EUROPE, THE MIDDLE EAST, AND CANADA", "ARMED FORCES CANADA", "ARMED FORCES THE MIDDLE EAST", "ARMED FORCES EUROPE", "ARMED FORCES PACIFIC", "ARMED FORCES AMERICAS (EXCEPT CANADA)", "ARMED FORCES AMERICAS"],
        p = ["AL", "AK", "AS", "AZ", "AR", "CA", "CO", "CT", "DE", "DC", "FM", "FL", "GA", "GU", "HI", "ID", "IL", "IN", "IA", "KS", "KY", "LA", "ME", "MH", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "MP", "OH", "OK", "OR", "PW", "PA", "PR", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VI", "VA", "WA", "WV", "WI", "WY", "AE", "AP", "AA"],
        v = function(b, c) {
            b && "function" != typeof b && c && ("click" == c ? a(b).trigger("click") : "submit" == c && a(b).submit())
        },
        w = {
            FieldsMapped: function(c, d) {
                h.debug && console.log("EVENT:", "FieldsMapped", "(Fields mapped to their respective addresses)", c, d), b.loaded ? e.postMappingOperations() : a(b).load(e.postMappingOperations)
            },
            MapInitialized: function(a, b) {
                h.debug && console.log("EVENT:", "MapInitialized", "(Mapped fields have been wired up to the window" + (h.ui ? ", document, and UI" : " and document") + ")", a, b)
            },
            AutocompleteInvoked: function(a, b) {
                h.debug && console.log("EVENT:", "AutocompleteInvoked", "(A request is about to be sent to the autocomplete service)", a, b), e.requestAutocomplete(a, b)
            },
            AutocompleteReceived: function(a, b) {
                h.debug && console.log("EVENT:", "AutocompleteReceived", "(A response has just been received from the autocomplete service)", a, b), e.showAutocomplete(a, b)
            },
            AddressChanged: function(a, b) {
                h.debug && console.log("EVENT:", "AddressChanged", "(Address changed)", a, b), h.autoVerify && b.address.enoughInput() && (0 == b.address.verifyCount || b.address.isFreeform()) && !b.suppressAutoVerification && b.address.hasDomFields() && b.address.active && !b.address.autocompleteVisible() && b.address.form && !b.address.form.processing && A("VerificationInvoked", {
                    address: b.address
                })
            },
            VerificationInvoked: function(a, b) {
                return h.debug && console.log("EVENT:", "VerificationInvoked", "(Address verification invoked)", a, b), !b.address || b.address && b.address.form && b.address.form.processing ? (h.debug && console.log("NOTICE: VerificationInvoked event handling aborted. Address is missing or an address in the same form is already processing."), void 0) : "accepted" != b.address.status() || b.verifyAccepted ? (b.address.form && (b.address.form.processing = !0), b.address.verify(b.invoke, b.invokeFn), void 0) : (h.debug && console.log("NOTICE: VerificationInvoked raised on an accepted or un-changed address. Nothing to do."), A("Completed", b))
            },
            RequestSubmitted: function(a, b) {
                h.debug && console.log("EVENT:", "RequestSubmitted", "(Request submitted to server)", a, b), e.showLoader(b.address)
            },
            ResponseReceived: function(a, b) {
                h.debug && console.log("EVENT:", "ResponseReceived", "(Response received from server, but has not been inspected)", a, b), e.hideLoader(b.address), "function" == typeof b.invoke ? b.invoke(b.response) : b.response.isInvalid() ? A("AddressWasInvalid", b) : b.response.isValid() ? A("AddressWasValid", b) : A("AddressWasAmbiguous", b)
            },
            RequestTimedOut: function(a, b) {
                h.debug && console.log("EVENT:", "RequestTimedOut", "(Request timed out)", a, b), b.address.form && delete b.address.form.processing, b.invoke && b.address.accept(b, !1), e.enableFields(b.address), e.hideLoader(b.address)
            },
            AddressWasValid: function(a, b) {
                h.debug && console.log("EVENT:", "AddressWasValid", "(Response indicates input address was valid)", a, b);
                var c = b.address,
                    d = b.response;
                b.response.chosen = d.raw[0], c.replaceWith(d.raw[0], !0, a), c.accept(b)
            },
            AddressWasAmbiguous: function(a, b) {
                h.debug && console.log("EVENT:", "AddressWasAmbiguous", "(Response indiciates input address was ambiguous)", a, b), e.showAmbiguous(b)
            },
            AddressWasInvalid: function(a, b) {
                h.debug && console.log("EVENT:", "AddressWasInvalid", "(Response indicates input address was invalid)", a, b), e.showInvalid(b)
            },
            OriginalInputSelected: function(a, b) {
                h.debug && console.log("EVENT:", "OriginalInputSelected", "(User chose to use original input)", a, b), b.address.accept(b, !1)
            },
            UsedSuggestedAddress: function(a, b) {
                h.debug && console.log("EVENT:", "UsedSuggestedAddress", "(User chose to a suggested address)", a, b), b.response.chosen = b.chosenCandidate, b.address.replaceWith(b.chosenCandidate, !0, a), b.address.accept(b)
            },
            InvalidAddressRejected: function(a, b) {
                h.debug && console.log("EVENT:", "InvalidAddressRejected", "(User chose to correct an invalid address)", a, b), b.address.form && delete b.address.form.processing, A("Completed", b)
            },
            AddressAccepted: function(a, b) {
                h.debug && console.log("EVENT:", "AddressAccepted", "(Address marked accepted)", a, b), b || (b = {}), b.address && b.address.form && delete b.address.form.processing, b.invoke && b.invokeFn && v(b.invoke, b.invokeFn), A("Completed", b)
            },
            Completed: function(a, b) {
                h.debug && console.log("EVENT:", "Completed", "(All done)", a, b), b.address && (e.enableFields(b.address), b.address.form && delete b.address.form.processing)
            }
        }
}(jQuery, window, document);
